{% extends 'base_home.html' %}
{% load static %}
{% block content %}
<link rel="stylesheet" href="{% static 'css/home.css' %}">

{% if messages %}
<div class="messages">
    {% for message in messages %}
    <div class="alert alert-success" role="alert">            
        {{message}}
    </div>        
    {% endfor %}
</div>
{% endif %}
<div class="content">     
    {% if request.user.is_admin %}
    <ul class="list-group">
        <div class="first_request">
            <div class="content-title">
                <h4>Admissions</h4>
                <a href="">View All</a>
            </div>
            {% if admissions %}
            {% for admission in admissions %}
            <li class="list-group-item">
                <a href="{% url 'admission' admission.email  %}">
                    <img src="{{admission.profile_picture.url}}" class="profile_picture">
                    <p id="info1">{{admission.full_name}}</p>
                    <p id="info2">{{admission.sent_date}}</p>
                </a>
            </li>
            {% endfor %}
            {% else %}
            <li class="list-group-item">No Results Found...</li>
            {% endif %}
        </div>
    </ul>  

    {% elif request.user.is_teacher %}
    <ul class="list-group">
        <div class="first_request">
            <div class="content-title">
                <h4>Student works</h4>
            </div>
            {% if classworks %}
            {% for work in classworks %}
            <li class="list-group-item">
                <a href="">
                    <p id="info1">{{work.student.full_name}}</p>
                    <p id="info2">{{work.topic}}</p>
                    <p id="info1">{{work.course}}</p>
                </a>
            </li>
            {% endfor %}
            {% else %}
            <li class="list-group-item">No Results Found...</li>
            {% endif %}
        </div>
    </ul>   

    {% elif request.user.is_student %}
    <ul class="list-group">
        <div class="first_request">
            <div class="content-title">
                <h4>Seen recently</h4>
            </div>
            {% if history %}
            {% for h in  history %}
            <li class="list-group-item">
                <a href="">
                    <p id="info1">{{h.content_id.name}}}</p>
                    <p id="info2">{{h.content_id.category}}</p>
                    <p id="info2">{{h.seen}}</p>
                </a>
            </li>
            {% endfor %}
            {% else %}
            <li class="list-group-item">No Results Found...</li>
            {% endif %}
        </div>
        <div class="second_request">
            <div class="content-title">
                <h4>Class work</h4>
                <a href="">View All</a>
            </div>
            {% if classworks %}
            {% for work in classworks %}
            <li class="list-group-item">
                <a href="">
                    <p id="info1">{{work.title}}</p>
                    <p id="info2">{{work.course}}</p>
                    <p id="info1">{{work.due_date}}</p>
                </a>
            </li>
            {% endfor %}
            {% else %}
            <li class="list-group-item">No Results Found...</li>
            {% endif %}
        </div>
    </ul>
    {% endif %}
    
    <div class="events">
        <div class="calendar">            
            {{calendar|safe}}
        </div>
        <div class="content-title">
            <h4>Events</h4>
            <a href="{% url 'events' %}">View All</a>
        </div>
        {% if request.user.is_admin or request.user.is_teacher %}
        <li class="list-group-item" id="add">
            <a href="{% url 'event_create' %}"><i class="fas fa-plus"></i> Add Event</a>
        </li>
        {% endif %}
        {% if events %}{% for event in events %}
        <li class="list-group-item">
            <a href="{% url 'event' event.title event.event_date %}">
                <p id="info1">{{event.title}}</p>
                <p id="info2">{{event.event_date}}</p>            
            </a>
        </li>
        {% endfor %}{% else %}
        <li class="list-group-item">
            No Results Found...
        </li>{% endif %}
    </div>
</div>    
{% endblock %}