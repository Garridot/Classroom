{% extends 'base_home.html' %}
{% load static %}
{% block content %}
<link rel="stylesheet" href="{% static 'css/home.css' %}">

{% if messages %}
<div class="messages">
    {% for message in messages %}
    <div class="alert alert-success" role="alert">            
        {{message}}
    </div>        
    {% endfor %}
</div>
{% endif %}

<div class="content"> 
    <ul class="list-group">
        
        <div class="admin">
            <div class="content-title">
                <h4>{{request_title}}</h4>  
                {% if url_view %}
                <a href="{{url_view}}">View All</a>
                {% endif %}
            </div>                       
            {% if request_data %}{% for data in request_data %}
            <li class="list-group-item">
                <a 
                {% if data.email %}href="{% url 'admission' data.email %}"{% endif %}
                {% if data.content_id %}href="/media/{{data.content_id}}"{% endif %}
                >                
                    {% if data.profile_picture %}                                          
                    <img  class="profile_picture" src="{{data.profile_picture.url}}">  
                    {% endif %} 

                    {% if data.full_name and data.sent_date %}
                    <p id="info1">{{data.full_name}}</p>                   
                    <p id="info2">{{data.sent_date}}</p> 
                    {% endif %} 

                    {% if data.content_id %}
                    <p id="info1">{{data.content_id.name}}</p>                   
                    <p id="info2">{{data.content_id.category}}</p>
                    <p id="info3">{{data.content_id.category.course}}</p> 
                    {% endif %}   
                            
                </a>
            </li>
            {% endfor %}{% else %}
            <li class="list-group-item">
                No Results Found...
            </li>
        {% endif %}
        </div>
              
    </ul>
    <div class="events">
        <div class="calendar">            
            {{calendar|safe}}
        </div>
        <div class="content-title">
            <h4>Events</h4>
            <a href="{% url 'events' %}">View All</a>
        </div>
        {% if request.user.is_admin or request.user.is_teacher %}
        <li class="list-group-item" id="add">
            <a href="{% url 'event_create' %}"><i class="fas fa-plus"></i> Add Event</a>
        </li>
        {% endif %}
        {% if events %}{% for event in events %}
        <li class="list-group-item">
            <a href="{% url 'event' event.title event.event_date %}">
                <p id="info1">{{event.title}}</p>
                <p id="info2">{{event.event_date}}</p>            
            </a>
        </li>
        {% endfor %}{% else %}
        <li class="list-group-item">
            No Results Found...
        </li>{% endif %}
    </div>
</div>    
{% endblock %}